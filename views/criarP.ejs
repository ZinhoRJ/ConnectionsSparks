<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<h2>CRIAR PERFIL:</h2>
<!-- <div>
    <img id="previewImage" src="/img/user.png" class="foto-perfil">
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" name="image">
        <button type="submit">Enviar</button>
    </form>
</div> <br> -->

<form id="formulario" action="/criar/<%= data._id %>?method=POST" method="POST" autocomplete="off" enctype="multipart/form-data">    
  <p>Essas informações serão públicas.</p>
  
    <label for="title">Nome</label>
    <input type="text" id="username" name="title" required>

    <div>
        <label for="nascimento">Data de Nascimento</label> 
        <input type="date" id="birthdate" name="nascimento" required>
    </div> <br>
    
    <label for="sexo">Sexo</label>
    <input type="text" id="gender" name="sexo" required>
    </select>

    <label for="insta">Usuário do Instagram</label> <font color="grey">(opcional)</font>
    <input type="text" id="instagram" placeholder="Não é necessário digitar o símbolo de arroba (@)" name="insta">
     
    <label for="body"><b>Biografia Aqui</b></label>
    <textarea name="body" coLs="50" rows="10"></textarea>

    <input type="submit" value="Criar Perfil" class="btn">
</form>

<!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->
<script>
    /* $(document).ready(function() {
    $('#forumlario').submit(function(event) {
      event.preventDefault();   


      $.ajax({
        url: '/criar',
        type: 'POST',
        data: $(this).serialize(),
        success: function(response) {
          if (response.error) {
            Swal.fire({
              icon: 'error',
              title: 'Oops...',
              text: response.error
            });
          } else {
            
          }
        }
      });
    });
  }); */

  //evento da função abaixo:
  //onkeypress="return lettersOnly(event);"
/* function lettersOnly(evt) {
    evt = (evt) ? evt : event;
    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :
        ((evt.which) ? evt.which : 0));
    if (charCode > 31 && (charCode < 48 || charCode > 57) &&
        (charCode < 65 || charCode > 90) &&
        (charCode < 97 || charCode > 122)) {
        //alert("Não é necessário adicionar o símbolo do @."); //não gostei do alert pq ele cria um popup na tela!
        event.preventDefault(); //esse só vai não adicionar o @ e ficar quieto
        return false;
    }
    return true;
}; */

document.getElementById('instagram').addEventListener('keypress', function(event) {
    // Obtenha o código da tecla pressionada
    var charCode = event.charCode || event.keyCode;
    // Converta o código da tecla para um caractere
    var charStr = String.fromCharCode(charCode);
    // Verifique se o caractere é o símbolo de arroba (@)
    if (charStr === '@') {
        // Impedir a entrada do caractere
        event.preventDefault();
    }
});
</script>